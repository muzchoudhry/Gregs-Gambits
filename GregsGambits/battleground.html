<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
    <title>Greg's Gambits | The Battleground</title>
    <link href="greg.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        function battleIt() {
            //initialize variables
            var heroPlay = 0;
            var trollPlay = 0;
            var heroPts = 100;
            var trollPts = 100;
            var rocks = "magic rocks";
            var sword = "the sword";
            var arrow = "bow and arrow";
            var heroChoice = " ";
            var trollChoice = " ";
            let herohealth = document.getElementById("herohealth");
            let trollhealth = document.getElementById("trollhealth");


            //fill HTML page
            document.getElementById("trollPts").innerHTML = (trollPts);
            document.getElementById("heroPts").innerHTML = (heroPts);
            document.getElementById("playerWeapon").innerHTML = ("Your weapon: ");
            document.getElementById("trollWeapon").innerHTML = ("The troll's weapon: ");
            document.getElementById("winner").innerHTML = ("&nbsp;");


            //loop repeats until troll or player get 130 points
            while ((trollPts < 130) && (heroPts < 130)) {
                // get player's weapon
                heroPlay = parseInt(prompt("What weapon do you choose? Enter 1 for magic rocks (enter 1), 2 for the sword, or 3 for the arrow: (Enter 4 to leave the game at any time)", " "));
                if (heroPlay == 4) {
                    break;
                }
                // get troll's weapon
                trollPlay = Math.ceil(Math.random() * 3);

                // assign weapon to player and troll
                if (trollPlay == 1) {
                    trollChoice = rocks;
                }
                if (trollPlay == 2) {
                    trollChoice = sword;
                }
                if (trollPlay == 3) {
                    trollChoice = arrow;
                }
                if (heroPlay == 1) {
                    heroChoice = rocks;
                }
                if (heroPlay == 2) {
                    heroChoice = sword;
                }
                if (heroPlay == 3) {
                    heroChoice = arrow;
                }

                //display weapon selections
                document.getElementById("playerWeapon").innerHTML = ("Your weapon: " + heroChoice);
                document.getElementById("trollWeapon").innerHTML = ("The troll's  weapon: " + trollChoice);
                alert("This round of the battle begins now!");

                //find the winner
                if (((trollPlay == 1) && (heroPlay == 3)) || ((trollPlay == 2) && (heroPlay == 1)) || ((trollPlay == 3) && (heroPlay == 2))) {
                    document.getElementById("winner").innerHTML = ("<img src='images/troll.jpg' />");
                    trollPts += 10;
                    heroPts -= 10;
                    document.getElementById("trollPts").innerHTML = (trollPts);
                    document.getElementById("heroPts").innerHTML = (heroPts);
                    if (heroPts -= 10) {
                        herohealth.value = heroPts;
                        trollhealth.value = trollPts;
                        //document.getElementById("herohealth").innerHTML = (herohealth);
                        //document.getElementById("trollhealth").innerHTML = (trollhealth);
                    }
                }

                if (((heroPlay == 1) && (trollPlay == 3)) || ((heroPlay == 2) && (trollPlay == 1)) || ((heroPlay == 3) && (trollPlay == 2))) {
                    document.getElementById("winner").innerHTML = ("<img src='images/wizard.jpg' />");
                    heroPts += 10;
                    trollPts -= 10;
                    document.getElementById("heroPts").innerHTML = (heroPts);
                    document.getElementById("trollPts").innerHTML = (trollPts);
                    //trollhealth = trollPts;
                    //herohealth = heroPts;
                    if (heroPts += 10) {
                        herohealth.value = heroPts;
                        trollhealth.value = trollPts;
                        //document.getElementById("herohealth").innerHTML = (herohealth);
                        //document.getElementById("trollhealth").innerHTML = (trollhealth);
                    }
                }
                if (((heroPlay == 1) && (trollPlay == 1)) || ((heroPlay == 2) && (trollPlay == 2)) || ((heroPlay == 3) && (trollPlay == 3))) {
                    document.getElementById("winner").innerHTML = ("This round is a tie. New weapons must be chosen");
                }

                //rocks vs arrow = win
                //sword vs rocks = win
                //arrow vs sword = win

                //if (heroPts += 10 || trollPts +=10) {
                //    herohealth.value += 10;
                //    trollhealth.value += 10;
                //}
                //if (heroPts -= 10 || trollPts -=10) {
                //    herohealth.value -= 10;
                //    trollhealth.value -= 10;
                //}
            }
            //display the final winner
            if (heroPlay == 4) {
                document.getElementById("winner").innerHTML = ("It's true: when you run, you live to fight another day. See you again, soon!");
            }
            if (trollPts >= 130) {
                document.getElementById("winner").innerHTML = ("The battle has been fought valiantly, but the troll has beaten you. Go home and nurse your wounds.");
            }
            if (heroPts >= 130) {
                document.getElementById("winner").innerHTML = ("The battle has been fought valiantly. You have prevailed. Congratulations!");
            }
        }

    </script>
    <style type="text/css">
        <!--
        .style1 {
            font-size: 18px
        }
        -->
    </style>
</head>

<body>
    <div id="container">
        <img src="images/superhero.jpg" width="120" height="120" class="floatleft" />
        <h1 align="center">The Battleground</h1>
        <div style="clear:both;"></div>
        <div id="nav">
            <p>
                <a href="index.html">Home</a>
                <a href="greg.html">About Greg</a>
                <a href="play_games.html">Play a Game</a>
                <a href="sign.html">Sign In</a>
                <a href="contact.html">Contact Us</a>
            </p>
        </div>
        <div id="content">
            <table width="85%" cellpadding="5" cellspacing="0" border="0">
                <tr>
                    <td><progress id="herohealth" value="100" max="130" style="border: 1px solid red;"></progress><img src="images/wizard.jpg" width="120" height="168" /></td>
                    <td><progress id="trollhealth" value="100" max="130" style="border: 1px solid red;"></progress><img src="images/troll.jpg" width="120" height="168" /></td>
                </tr>
                <tr>
                    <td><span class="style1">Wizard uses: </span></td>
                    <td><span class="style1">Troll uses: </span></td>
                </tr>
                <tr>
                    <td id="playerWeapon" span class="style1">Weapon goes here</span></td>
                    <td id="trollWeapon" span class="style1">Weapon goes here</span></td>
                </tr>
                <tr><td colspan=2><span class="style1">The winner is:</span></td></tr>
                <tr><td colspan=2 id="winner" align="center" class="style1">&nbsp;</td></tr>
                <tr>
                    <td><span class="style1">Wizard points: </span></td>
                    <td><span class="style1">Troll points:</span></td>
                </tr>
                <tr><td class="style1" id="heroPts">100</td> <td class="style1" id="trollPts">100</td></tr>
                <tr>
                    <td><input type="button" id="battle" value="Let the battle begin!" onclick="battleIt()" ; /> </td>
                    <td><input type="button" id="return" value="Return to battle instructions" onclick="location.href = 'greg_battle.html'" ; /></td>
            </table>
        </div>
        <div id="footer">
            Copyright &copy; 2019 Greg's Gambits<br />
            <a href="mailto:muz@choudhry.com">muz@choudhry.com</a>
        </div>
    </div>
</body>
</html>
